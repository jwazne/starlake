{"taskName":"starbake_kpis.kpis","json":"{\n  \"tables\" : [ {\n    \"table\" : \"order_metrics\",\n    \"columns\" : [ \"total_orders\", \"total_revenue\", \"avg_order_value\", \"customers_with_orders\" ],\n    \"isTask\" : false\n  }, {\n    \"table\" : \"customer_metrics\",\n    \"columns\" : [ \"total_customers\", \"avg_orders_per_customer\", \"avg_spent_per_customer\", \"earliest_order_date\", \"latest_order_date\", \"avg_customer_lifetime_days\", \"avg_categories_per_customer\" ],\n    \"isTask\" : false\n  }, {\n    \"domain\" : \"starbake_kpis\",\n    \"table\" : \"kpis\",\n    \"columns\" : [ \"total_customers\", \"total_orders\", \"total_revenue\", \"avg_order_value\", \"avg_orders_per_customer\", \"avg_spent_per_customer\", \"earliest_order_date\", \"latest_order_date\", \"avg_customer_lifetime_days\", \"avg_categories_per_customer\", \"customer_order_rate\", \"daily_revenue\", \"daily_order_rate\" ],\n    \"isTask\" : false\n  } ],\n  \"relations\" : [ {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"total_customers\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"total_customers\"\n    },\n    \"expression\" : \"total_customers\"\n  }, {\n    \"from\" : {\n      \"table\" : \"order_metrics\",\n      \"column\" : \"total_orders\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"total_orders\"\n    },\n    \"expression\" : \"total_orders\"\n  }, {\n    \"from\" : {\n      \"table\" : \"order_metrics\",\n      \"column\" : \"total_revenue\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"total_revenue\"\n    },\n    \"expression\" : \"total_revenue\"\n  }, {\n    \"from\" : {\n      \"table\" : \"order_metrics\",\n      \"column\" : \"avg_order_value\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"avg_order_value\"\n    },\n    \"expression\" : \"avg_order_value\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"avg_orders_per_customer\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"avg_orders_per_customer\"\n    },\n    \"expression\" : \"avg_orders_per_customer\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"avg_spent_per_customer\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"avg_spent_per_customer\"\n    },\n    \"expression\" : \"avg_spent_per_customer\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"earliest_order_date\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"earliest_order_date\"\n    },\n    \"expression\" : \"earliest_order_date\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"latest_order_date\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"latest_order_date\"\n    },\n    \"expression\" : \"latest_order_date\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"avg_customer_lifetime_days\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"avg_customer_lifetime_days\"\n    },\n    \"expression\" : \"avg_customer_lifetime_days\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"avg_categories_per_customer\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"avg_categories_per_customer\"\n    },\n    \"expression\" : \"avg_categories_per_customer\"\n  }, {\n    \"from\" : {\n      \"table\" : \"order_metrics\",\n      \"column\" : \"customers_with_orders\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"customer_order_rate\"\n    },\n    \"expression\" : \"om.customers_with_orders::FLOAT / cm.total_customers\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"total_customers\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"customer_order_rate\"\n    },\n    \"expression\" : \"om.customers_with_orders::FLOAT / cm.total_customers\"\n  }, {\n    \"from\" : {\n      \"table\" : \"order_metrics\",\n      \"column\" : \"total_revenue\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"daily_revenue\"\n    },\n    \"expression\" : \"om.total_revenue / NULLIF(DATEDIFF('day', cm.earliest_order_date, cm.latest_order_date), 0)\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"earliest_order_date\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"daily_revenue\"\n    },\n    \"expression\" : \"DATEDIFF('day', cm.earliest_order_date, cm.latest_order_date)\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"latest_order_date\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"daily_revenue\"\n    },\n    \"expression\" : \"DATEDIFF('day', cm.earliest_order_date, cm.latest_order_date)\"\n  }, {\n    \"from\" : {\n      \"table\" : \"order_metrics\",\n      \"column\" : \"total_orders\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"daily_order_rate\"\n    },\n    \"expression\" : \"om.total_orders::FLOAT / NULLIF(DATEDIFF('day', cm.earliest_order_date, cm.latest_order_date), 0)\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"earliest_order_date\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"daily_order_rate\"\n    },\n    \"expression\" : \"DATEDIFF('day', cm.earliest_order_date, cm.latest_order_date)\"\n  }, {\n    \"from\" : {\n      \"table\" : \"customer_metrics\",\n      \"column\" : \"latest_order_date\"\n    },\n    \"to\" : {\n      \"domain\" : \"starbake_kpis\",\n      \"table\" : \"kpis\",\n      \"column\" : \"daily_order_rate\"\n    },\n    \"expression\" : \"DATEDIFF('day', cm.earliest_order_date, cm.latest_order_date)\"\n  } ]\n}"}